-- Création de la base de données
CREATE DATABASE Projet_FormationMuscu;

-- Utilisation de la base de données
USE Projet_FormationMuscu;

-- Création de la table Utilisateur
CREATE TABLE Utilisateur (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nom VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    mot_de_passe VARCHAR(255) NOT NULL
);

-- Création de la table Programme
CREATE TABLE Programme (
    id INT AUTO_INCREMENT PRIMARY KEY,
    titre VARCHAR(255) NOT NULL,
    description TEXT NOT NULL,
    prix FLOAT NOT NULL,
    duree INT NOT NULL
);

-- Création de la table Avis
CREATE TABLE Avis (
    id INT AUTO_INCREMENT PRIMARY KEY,
    utilisateur_id INT NOT NULL,
    programme_id INT NOT NULL,
    commentaire TEXT NOT NULL,
    note INT NOT NULL CHECK (note BETWEEN 1 AND 5), -- Note entre 1 et 5
    date_avis DATE NOT NULL,
    FOREIGN KEY (utilisateur_id) REFERENCES Utilisateur(id) ON DELETE CASCADE,
    FOREIGN KEY (programme_id) REFERENCES Programme(id) ON DELETE CASCADE
);

-- Création de la table Achat
CREATE TABLE Achat (
    id INT AUTO_INCREMENT PRIMARY KEY,
    utilisateur_id INT NOT NULL,
    programme_id INT NOT NULL,
    date_achat DATE NOT NULL,
    FOREIGN KEY (utilisateur_id) REFERENCES Utilisateur(id) ON DELETE CASCADE,
    FOREIGN KEY (programme_id) REFERENCES Programme(id) ON DELETE CASCADE
);
